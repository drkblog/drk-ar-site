var sidila;(()=>{var t={498:(t,s)=>{!function(){"use strict";function t(t,s,e){this.text=t,this.offset=s,this.elements=e}t.prototype.forEach=function(t,s){for(var e=this.elements,i=0,h=e.length;i<h;i++)t.call(s,e[i],i,e)},"undefined"!=typeof Symbol&&Symbol.iterator&&(t.prototype[Symbol.iterator]=function(){return this.elements[Symbol.iterator]()});var e={},i={_read_statement(){var s=e,i=this._offset;this._cache._statement=this._cache._statement||{};var h=this._cache._statement[i];if(h)return this._offset=h[1],h[0];for(var f=this._offset,r=[],o=null;;){var a=this._offset,_=new Array(1),n=e,u=this._offset;if((n=this._read_turn())===e&&(this._offset=u,(n=this._read_move())===e&&(this._offset=u,(n=this._read_comment())===e&&(this._offset=u))),n!==e?(_[0]=n,this._read_ws()!==e||(_=null,this._offset=a)):(_=null,this._offset=a),null===_?o=e:(o=new t(this._input.substring(a,this._offset),a,_),this._offset=this._offset),o===e)break;r.push(o)}return r.length>=0?(s=new t(this._input.substring(f,this._offset),f,r),this._offset=this._offset):s=e,this._cache._statement[i]=[s,this._offset],s},_read_move(){var s=e,i=this._offset;this._cache._move=this._cache._move||{};var h=this._cache._move[i];if(h)return this._offset=h[1],h[0];var f=null,r=this._offset+7;return r<=this._inputSize&&(f=this._input.substring(this._offset,r)),"avanzar"===f?(s=new t(this._input.substring(this._offset,this._offset+7),this._offset,[]),this._offset=this._offset+7):(s=e,this._offset>this._failure&&(this._failure=this._offset,this._expected=[]),this._offset===this._failure&&this._expected.push(["SiDiLa::move","'avanzar'"])),this._cache._move[i]=[s,this._offset],s},_read_turn(){var s=e,i=this._offset;this._cache._turn=this._cache._turn||{};var h=this._cache._turn[i];if(h)return this._offset=h[1],h[0];var f=this._offset,r=new Array(2),o=e,a=null,_=this._offset+5;if(_<=this._inputSize&&(a=this._input.substring(this._offset,_)),"girar"===a?(o=new t(this._input.substring(this._offset,this._offset+5),this._offset,[]),this._offset=this._offset+5):(o=e,this._offset>this._failure&&(this._failure=this._offset,this._expected=[]),this._offset===this._failure&&this._expected.push(["SiDiLa::turn","'girar'"])),o!==e)if(r[0]=o,this._read_ws()!==e){var n=e,u=null,c=this._offset+8;if(c<=this._inputSize&&(u=this._input.substring(this._offset,c)),"hacia la"===u?(n=new t(this._input.substring(this._offset,this._offset+8),this._offset,[]),this._offset=this._offset+8):(n=e,this._offset>this._failure&&(this._failure=this._offset,this._expected=[]),this._offset===this._failure&&this._expected.push(["SiDiLa::turn","'hacia la'"])),n!==e)if(this._read_ws()!==e){var l=e,p=this._offset,d=null,g=this._offset+9;if(g<=this._inputSize&&(d=this._input.substring(this._offset,g)),"izquierda"===d?(l=new t(this._input.substring(this._offset,this._offset+9),this._offset,[]),this._offset=this._offset+9):(l=e,this._offset>this._failure&&(this._failure=this._offset,this._expected=[]),this._offset===this._failure&&this._expected.push(["SiDiLa::turn",'"izquierda"'])),l===e){this._offset=p;var m=null,y=this._offset+7;y<=this._inputSize&&(m=this._input.substring(this._offset,y)),"derecha"===m?(l=new t(this._input.substring(this._offset,this._offset+7),this._offset,[]),this._offset=this._offset+7):(l=e,this._offset>this._failure&&(this._failure=this._offset,this._expected=[]),this._offset===this._failure&&this._expected.push(["SiDiLa::turn",'"derecha"'])),l===e&&(this._offset=p)}l!==e?r[1]=l:(r=null,this._offset=f)}else r=null,this._offset=f;else r=null,this._offset=f}else r=null,this._offset=f;else r=null,this._offset=f;return null===r?s=e:(s=new t(this._input.substring(f,this._offset),f,r),this._offset=this._offset),this._cache._turn[i]=[s,this._offset],s},_read_comment(){var s=e,i=this._offset;this._cache._comment=this._cache._comment||{};var h=this._cache._comment[i];if(h)return this._offset=h[1],h[0];var f=this._offset,r=new Array(2),o=e,a=null,_=this._offset+1;if(_<=this._inputSize&&(a=this._input.substring(this._offset,_)),"#"===a?(o=new t(this._input.substring(this._offset,this._offset+1),this._offset,[]),this._offset=this._offset+1):(o=e,this._offset>this._failure&&(this._failure=this._offset,this._expected=[]),this._offset===this._failure&&this._expected.push(["SiDiLa::comment","'#'"])),o!==e){r[0]=o;for(var n=e,u=this._offset,c=[],l=null;this._offset<this._inputSize?(l=new t(this._input.substring(this._offset,this._offset+1),this._offset,[]),this._offset=this._offset+1):(l=e,this._offset>this._failure&&(this._failure=this._offset,this._expected=[]),this._offset===this._failure&&this._expected.push(["SiDiLa::comment","<any char>"])),l!==e;)c.push(l);c.length>=0?(n=new t(this._input.substring(u,this._offset),u,c),this._offset=this._offset):n=e,n!==e?r[1]=n:(r=null,this._offset=f)}else r=null,this._offset=f;return null===r?s=e:(s=new t(this._input.substring(f,this._offset),f,r),this._offset=this._offset),this._cache._comment[i]=[s,this._offset],s},_read_ws(){var s=e,i=this._offset;this._cache._ws=this._cache._ws||{};var h=this._cache._ws[i];if(h)return this._offset=h[1],h[0];for(var f=this._offset,r=[],o=null;;){var a=this._offset;if((o=this._read_comment())===e){this._offset=a;for(var _=this._offset,n=[],u=null;;){var c=null,l=this._offset+1;if(l<=this._inputSize&&(c=this._input.substring(this._offset,l)),null!==c&&/^[ \t\r\n]/.test(c)?(u=new t(this._input.substring(this._offset,this._offset+1),this._offset,[]),this._offset=this._offset+1):(u=e,this._offset>this._failure&&(this._failure=this._offset,this._expected=[]),this._offset===this._failure&&this._expected.push(["SiDiLa::ws","[ \\t\\r\\n]"])),u===e)break;n.push(u)}n.length>=1?(o=new t(this._input.substring(_,this._offset),_,n),this._offset=this._offset):o=e,o===e&&(this._offset=a)}if(o===e)break;r.push(o)}return r.length>=0?(s=new t(this._input.substring(f,this._offset),f,r),this._offset=this._offset):s=e,this._cache._ws[i]=[s,this._offset],s}},h=function(t,s,e){this._input=t,this._inputSize=t.length,this._actions=s,this._types=e,this._offset=0,this._cache={},this._failure=0,this._expected=[]};h.prototype.parse=function(){var t=this._read_statement();if(t!==e&&this._offset===this._inputSize)return t;throw 0===this._expected.length&&(this._failure=this._offset,this._expected.push(["SiDiLa","<EOF>"])),this.constructor.lastError={offset:this._offset,expected:this._expected},new SyntaxError(function(t,s,e){for(var i=t.split(/\n/g),h=0,f=0;f<=s;)f+=i[h].length+1,h+=1;for(var r=i[h-1],o="Line "+h+": expected one of:\n\n",a=0;a<e.length;a++)o+="    - "+e[a][1]+" from "+e[a][0]+"\n";for(var _=h.toString();_.length<6;)_=" "+_;for(o+="\n"+_+" | "+r+"\n",f-=r.length+10;f<s;)o+=" ",f+=1;return o+"^"}(this._input,this._failure,this._expected))},Object.assign(h.prototype,i);var f={Grammar:i,Parser:h,parse:function(t,s){return new h(t,(s=s||{}).actions,s.types).parse()}};Object.assign(s,f)}()}},s={};function e(i){var h=s[i];if(void 0!==h)return h.exports;var f=s[i]={exports:{}};return t[i](f,f.exports,e),f.exports}e.d=(t,s)=>{for(var i in s)e.o(s,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:s[i]})},e.o=(t,s)=>Object.prototype.hasOwnProperty.call(t,s),e.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var i={};(()=>{"use strict";e.r(i),e.d(i,{AsciiPainter:()=>r,BasicPainter:()=>o,Board:()=>f,CardinalDirection:()=>s,Game:()=>a,Player:()=>h,maps:()=>_});class t{static Wall=new t("█");static Exit=new t("░");static Space=new t(" ");constructor(t){this.symbol=t}}class s{static North=new s("▲",(t=>({x:t.x,y:t.y-1})));static East=new s("▶",(t=>({x:t.x+1,y:t.y})));static South=new s("▼",(t=>({x:t.x,y:t.y+1})));static West=new s("◀",(t=>({x:t.x-1,y:t.y})));constructor(t,s){this.symbol=t,this.action=s}advance(t){return this.action(t)}static order=[this.North,this.East,this.South,this.West];static toTheRight(t){const s=this.order.indexOf(t)+1;return this.order[s%4]}static toTheLeft(t){const s=this.order.indexOf(t)-1;return this.order[s>-1?s:3]}}class h{constructor(t,s,e){this.x=t,this.y=s,this.direction=e,this.crashed=!1}getSymbol(){return this.crashed?"✟":this.direction.symbol}move(){const t=this.direction.advance(this);this.x=t.x,this.y=t.y}crash(){this.crashed=!0}wouldMove(){return this.direction.advance(this)}isAt(t,s){return this.x==t&&this.y==s}rotateLeft(){this.direction=s.toTheLeft(this.direction)}rotateRight(){this.direction=s.toTheRight(this.direction)}}class f{constructor(s,e){this.player=e,this.side=s,this.board=[];for(let e=0;e<s;e++){this.board[e]=[];for(let i=0;i<s;i++)this.board[e][i]=t.Space}this.boardLoadHardcoded()}boardLoadHardcoded(){for(let s=0;s<this.side;s++)this.board[s][0]=t.Wall,this.board[s][this.side-1]=t.Wall,this.board[0][s]=t.Wall,this.board[this.side-1][s]=t.Wall;this.board[side-1][sid-2]=t.Exit}canMoveInto(s,e){return this.board[s][e]===t.Space}isCrashed(){return this.player.crashed}movePlayer(){const t=this.player.wouldMove();this.canMoveInto(t.x,t.y)?this.player.move():this.player.crash()}rotatePlayerLeft(){this.player.rotateLeft()}rotatePlayerRight(){this.player.rotateRight()}getPieceSymbol(t,s){return this.player.isAt(t,s)?this.player.getSymbol():this.board[t][s].symbol}}class r{static paint(t){let s="";for(let e=0;e<t.side;e++){for(let i=0;i<t.side;i++)s+=t.getPieceSymbol(i,e);s+="\n"}return s}}class o{static paint(t){let s='<div class="sidila-row">';for(let e=0;e<t.side;e++){for(let i=0;i<t.side;i++)s+=this.getImageTag(t.getPieceSymbol(i,e));s+='</div><div class="sidila-row">'}return s+="</div>",s}static getImageTag(t){switch(t){case"█":return this.getBaseTag("wall.png");case"░":return this.getBaseTag("exit.png");case" ":return this.getBaseTag("space.png");case"▲":return this.getBaseTag("player-n.png");case"▶":return this.getBaseTag("player-e.png");case"▼":return this.getBaseTag("player-s.png");case"◀":return this.getBaseTag("player-w.png");case"✟":return this.getBaseTag("skull.png")}}static getBaseTag(t){return`<img src="/sidila/img/${t}">`}}class a{static processStatement(t,s,e){const i=t.elements[s];this.tryExecuting(i,e)}static tryExecuting(t,s){console.log(t.text),"avanzar"==t.text?s.movePlayer():2==t.elements.length?"girar"==t.elements[0].text&&("derecha"==t.elements[1].text?s.rotatePlayerRight():"izquierda"==t.elements[1].text&&s.rotatePlayerLeft()):t.elements.forEach((t=>{this.tryExecuting(t,s)}))}}const _=e(498)})(),sidila=i})();